<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv='cache-control' content='no-cache'> 
  <meta http-equiv='expires' content='0'> 
  <meta http-equiv='pragma' content='no-cache'>
  <title>TorSearch</title>
  <link rel="icon" href="../img/smgray2.ico" type="image/x-icon">
  <script src="../js/jquery-1.9.1.min.js"></script>
</head>

<body>
  <h1>Search Termz: <input type="text" id="searchTerm" value="" /></h1>
  <div>
    <h1>Pirate Bay: <a href="https://thepiratebay.org/" id="linkPirateBay">https://thepiratebay.org/</a></h1>
  </div>
  <div>
    <h1>Leet Torrents: <a href="https://1337x.to/home/" id="linkLeet">https://1337x.to/home/</a></h1>
  </div>
  <div>
    <h1>Torrent Galaxy: <a href="https://torrentgalaxy.to/" id="linkTorrentGalaxy">https://torrentgalaxy.to/</a></h1>
  </div>
  <div>
    <h1>BitSearch: <a href="https://bitsearch.to/" id="linkBitSearch">https://bitsearch.to/</a></h1>
  </div>
  <div>
    <h1>IPTorrents: <a href="https://iptorrents.com/t" id="linkIPTorrents">https://iptorrents.com/t</a></h1>
  </div>
</body>
<script>
  // Read a page's GET URL variables and return them as an associative array.
  function getUrlVars() {
    var vars = [],
      hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  }

  function updateLinks(searchTerm) {
    $('#linkPirateBay').text('https://thepiratebay.org/search.php?q=' + searchTerm);
    $('#linkPirateBay').attr('href', 'https://thepiratebay.org/search.php?q=' + searchTerm);

    $('#linkLeet').text('https://1337x.to/search/' + searchTerm + '/1/');
    $('#linkLeet').attr('href', 'https://1337x.to/search/' + searchTerm + '/1/');

    $('#linkTorrentGalaxy').text('https://torrentgalaxy.to/torrents.php?search=' + searchTerm +
      '&sort=seeders&order=desc');
    $('#linkTorrentGalaxy').attr('href', 'https://torrentgalaxy.to/torrents.php?search=' + searchTerm +
      '&sort=seeders&order=desc');

    $('#linkBitSearch').text('https://bitsearch.to/search?q=' + searchTerm + '&sort=seeders');
    $('#linkBitSearch').attr('href', 'https://bitsearch.to/search?q=' + searchTerm + '&sort=seeders');

    $('#linkIPTorrents').text('https://iptorrents.com/t?q=' + searchTerm + ';o=seeders#torrents');
    $('#linkIPTorrents').attr('href', 'https://iptorrents.com/t?q=' + searchTerm + ';o=seeders#torrents');
  }


  $(document).ready(function () {

    var searchTermQueryString = getUrlVars()["searchTerm"];
    console.log("Search Term: " + searchTermQueryString);
    if (searchTermQueryString) {
      $('#searchTerm').val(searchTermQueryString);
      updateLinks(searchTermQueryString);

    }

    $('#searchTerm').change(function () {
      let searchTerm = $('#searchTerm').val();
      updateLinks(searchTerm)
    });
  });
</script>

</html>